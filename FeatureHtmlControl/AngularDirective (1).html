<html>

<head>
    <title>Custom Directives</title>
</head>

<body>
    <div ng-app="mainApp" ng-controller="CustomDirectiveController">
        <customdirective name="type1"></customdirective>
        <customdirective name="type2"></customdirective>
        <customdirective name="type3"></customdirective>

    </div>


    <script language="javascript" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>


    <script>
        var mainApp = angular.module("mainApp", []);

        mainApp.directive('customdirective', function () {
            var directive = {};
            directive.restrict = 'E';
            
            directive.template = '<svg height="200" width="800">' +
                '<line x1="0" y1="28" x2="200" y2="28" style="stroke:black;stroke-width:10" />' +
                '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 361.417 725.598" width="102mm" height="25mm" version="1.1">'+
                '<g transform="translate(customdirective.circlecolor -60)">' +
                '<path fill="#e6e6e6" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.533" d="m 353.21 475.08 h 63.676 v 545.31 h 70.407 v -543.63 h 61.151 l -97.617 -173.35 Z" />'+
                 '</g></svg>'+
               '<circle cx="customdirective.circle1" cy="30" r="20" stroke="black" stroke-width="3" fill="red" />' +
               '<text x="30" y="65" fill="blue">{{customdirective.leftlabel}}</text>' +
               '<text x="75" y="15" fill="blue">{{customdirective.centerlabel}}</text>' +
               '<circle cx="customdirective.circle2" cy="30" r="20" stroke="customdirective.circlecolor" stroke-width="3" fill="customdirective.circlecolor" />' +
               '<text x="130" y="65" fill="blue">{{customdirective.rightlabel}}</text></svg>';
            directive.scope = {
                customdirective: "=name",
            }

            directive.compile = function (element, attributes) {

                var linkFunction = function ($scope, element, attributes) {
                    element.html('<svg height="200" width="800">' +
                                    '<line x1="0" y1="28" x2="200" y2="28" style="stroke:grey;stroke-width:10" />' +
                                     '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 361.417 725.598" width="102mm" height="25mm" version="1.1">' +
                '<g transform="translate('+$scope.customdirective.arrow+' -60)">' +
                '<path fill="#e6e6e6" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.533" d="m 353.21 475.08 h 63.676 v 545.31 h 70.407 v -543.63 h 61.151 l -97.617 -173.35 Z" />' +
                 '</g></svg>' +
                                    '<circle cx="'+ $scope.customdirective.circle1 +'" cy="30" r="20" stroke="black" stroke-width="3" fill="black" />' +
                                    '<text x="30" y="65" fill="black">' + $scope.customdirective.leftlabel + '</text>' +
                                    '<text x="75" y="15" fill="black">' + $scope.customdirective.centerlabel + '</text>' +
                                    '<circle cx="' + $scope.customdirective.circle2 + '" cy="30" r="20" stroke="' + $scope.customdirective.circlecolor + '"  stroke-width="3" fill="' + $scope.customdirective.circlecolor + '" />' +
                                    '<text x="130" y="65" fill="black">' + $scope.customdirective.rightlabel + '</text></svg>');

                }
                return linkFunction;
            }

            return directive;
        });

        mainApp.controller('CustomDirectiveController', function ($scope) {

            //Example -1 with 7 inputs
            $scope.type1 = {};
            $scope.type1.leftlabel = "Other";
            $scope.type1.centerlabel = "Current";
            $scope.type1.rightlabel = "Average";
            $scope.type1.circle1 ="50";
            $scope.type1.circle2 = "150";
            $scope.type1.arrow = "-970.12";
            $scope.type1.circlecolor = "blue";

            //Example -2 with 7 inputs
            $scope.type2 = {};
            $scope.type2.leftlabel = "Other1";
            $scope.type2.centerlabel = "Current1";
            $scope.type2.rightlabel = "Average1";
            $scope.type2.circle1 = "60";
            $scope.type2.circle2 = "150";
            $scope.type2.arrow = "-770.12";
            $scope.type2.circlecolor = "orange";

            //Example -2 with 7 inputs
            $scope.type3 = {};
            $scope.type3.leftlabel = "Other2";
            $scope.type3.centerlabel = "Current2";
            $scope.type3.rightlabel = "Average2";
            $scope.type3.circle1 = "40";
            $scope.type3.circle2 = "170";
            $scope.type3.arrow = "-1070.12";
            $scope.type3.circlecolor = "pink";

        });

    </script>

</body>
</html>


